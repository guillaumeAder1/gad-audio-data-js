<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Audio analayser demo</title>
</head>
<body>

  <audio
    id='audio'
    controls
    crossOrigin='anonymous'
    src='assets/lowfi-loop.mp3'
  ></audio>
  <script src="lib/bundle.umd.js"></script>
  <script>
    window.addEventListener('DOMContentLoaded', (event) => {
      const source = document.querySelector('audio');
      const audioAnalayser = new AudioTool.AudioAnalyser({ source });
      console.log('DOM fully loaded and parsed', AudioTool, source);
      window.requestAnimationFrame(logFrequencies);

      function logFrequencies() {
        const data = audioAnalayser.getFrequencies();
        console.log(data);
        window.requestAnimationFrame(logFrequencies);
      }
    });
  </script>
</body>
</html>